<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Buddy Allocator: buddy.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Buddy Allocator
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">buddy.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &quot;<a class="el" href="buddy_8h_source.html">buddy.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="list_8h_source.html">list.h</a>&quot;</code><br />
</div>
<p><a href="buddy_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structblock__t.html">block_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a260e435d62aa44fda8a1368df99c4a89"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a260e435d62aa44fda8a1368df99c4a89">USE_DEBUG</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a260e435d62aa44fda8a1368df99c4a89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23bae2b7cd4008c90256be146e21cccf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a23bae2b7cd4008c90256be146e21cccf">MIN_ORDER</a>&#160;&#160;&#160;12</td></tr>
<tr class="separator:a23bae2b7cd4008c90256be146e21cccf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab08dffec08ac450d78d4c062b571939e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#ab08dffec08ac450d78d4c062b571939e">MAX_ORDER</a>&#160;&#160;&#160;20</td></tr>
<tr class="separator:ab08dffec08ac450d78d4c062b571939e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d467c1d283fdfa1f2081ba1e0d01b6e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a>&#160;&#160;&#160;(1&lt;&lt;<a class="el" href="buddy_8c.html#a23bae2b7cd4008c90256be146e21cccf">MIN_ORDER</a>)</td></tr>
<tr class="separator:a7d467c1d283fdfa1f2081ba1e0d01b6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c13b46aacf7af9976a7f058076c81a3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a7c13b46aacf7af9976a7f058076c81a3">PAGE_TO_ADDR</a>(page_idx)&#160;&#160;&#160;(void *)((page_idx*<a class="el" href="buddy_8c.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a>) + <a class="el" href="buddy_8c.html#ad6d688a63e574ba24b0247b2bec1e31d">g_memory</a>)</td></tr>
<tr class="separator:a7c13b46aacf7af9976a7f058076c81a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa44fbfb588ad3483e93dfc7fd28b2afd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#aa44fbfb588ad3483e93dfc7fd28b2afd">ADDR_TO_PAGE</a>(addr)&#160;&#160;&#160;((unsigned long)((void *)addr - (void *)<a class="el" href="buddy_8c.html#ad6d688a63e574ba24b0247b2bec1e31d">g_memory</a>) / <a class="el" href="buddy_8c.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a>)</td></tr>
<tr class="separator:aa44fbfb588ad3483e93dfc7fd28b2afd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae7263f0e40a1e0dfefa6f53652a4a05"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#aae7263f0e40a1e0dfefa6f53652a4a05">BUDDY_ADDR</a>(addr,  o)</td></tr>
<tr class="separator:aae7263f0e40a1e0dfefa6f53652a4a05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9077500d1488a75e4eec5eeb1131655e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a9077500d1488a75e4eec5eeb1131655e">PDEBUG</a>(fmt, ...)</td></tr>
<tr class="separator:a9077500d1488a75e4eec5eeb1131655e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcf0d5a50dd7e407cd464c1afbd27554"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#abcf0d5a50dd7e407cd464c1afbd27554">IFDEBUG</a>(x)</td></tr>
<tr class="separator:abcf0d5a50dd7e407cd464c1afbd27554"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a291be3a0fdc0a7ec9c808e87c62c2385"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a291be3a0fdc0a7ec9c808e87c62c2385">merge</a> (<a class="el" href="structblock__t.html">block_t</a> *block, <a class="el" href="structblock__t.html">block_t</a> *buddy)</td></tr>
<tr class="separator:a291be3a0fdc0a7ec9c808e87c62c2385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bec8ecb275b3b38660e8f1ff1bb6fce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a8bec8ecb275b3b38660e8f1ff1bb6fce">print_free_area</a> ()</td></tr>
<tr class="memdesc:a8bec8ecb275b3b38660e8f1ff1bb6fce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print free areas in a tabular format, similar to the buddy allocator slides and examples.  <a href="#a8bec8ecb275b3b38660e8f1ff1bb6fce">More...</a><br /></td></tr>
<tr class="separator:a8bec8ecb275b3b38660e8f1ff1bb6fce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a163818df92461e2dc01f190f17493a1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a163818df92461e2dc01f190f17493a1b">count_blocks</a> (<a class="el" href="notes_8txt.html#aeb8c646dbe282a58600b038dd7f0fed2">struct</a> <a class="el" href="structlist__head.html">list_head</a> *theList)</td></tr>
<tr class="memdesc:a163818df92461e2dc01f190f17493a1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count and report the number of blocks in a given free_area member.  <a href="#a163818df92461e2dc01f190f17493a1b">More...</a><br /></td></tr>
<tr class="separator:a163818df92461e2dc01f190f17493a1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a4add9f9079c0eabd81e1da0c12ae6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a3a4add9f9079c0eabd81e1da0c12ae6a">print_block</a> (<a class="el" href="structblock__t.html">block_t</a> *block)</td></tr>
<tr class="memdesc:a3a4add9f9079c0eabd81e1da0c12ae6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print information for a given block.  <a href="#a3a4add9f9079c0eabd81e1da0c12ae6a">More...</a><br /></td></tr>
<tr class="separator:a3a4add9f9079c0eabd81e1da0c12ae6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f7a9bf73e255fb58bf8e57855e67532"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structblock__t.html">block_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a2f7a9bf73e255fb58bf8e57855e67532">find_free_block</a> (int <a class="el" href="notes_8txt.html#ae170b788b9ce36849b8a92724a029135">order</a>)</td></tr>
<tr class="memdesc:a2f7a9bf73e255fb58bf8e57855e67532"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locate and return a pointer to a free block in the given order among the free_area, or NULL if no such block exists.  <a href="#a2f7a9bf73e255fb58bf8e57855e67532">More...</a><br /></td></tr>
<tr class="separator:a2f7a9bf73e255fb58bf8e57855e67532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77eea0047539c2e97bf94de50ccdf9f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a77eea0047539c2e97bf94de50ccdf9f7">buddy_dump_verbose</a> ()</td></tr>
<tr class="memdesc:a77eea0047539c2e97bf94de50ccdf9f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a more useful and thorough dump of the free area.  <a href="#a77eea0047539c2e97bf94de50ccdf9f7">More...</a><br /></td></tr>
<tr class="separator:a77eea0047539c2e97bf94de50ccdf9f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa16d99b90dd0a6b9d7e3db0573620c21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#aa16d99b90dd0a6b9d7e3db0573620c21">buddy_dump</a> ()</td></tr>
<tr class="memdesc:aa16d99b90dd0a6b9d7e3db0573620c21"><td class="mdescLeft">&#160;</td><td class="mdescRight">print free pages in each order.  <a href="#aa16d99b90dd0a6b9d7e3db0573620c21">More...</a><br /></td></tr>
<tr class="separator:aa16d99b90dd0a6b9d7e3db0573620c21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdfe2346b53850f10cb4cb70a79e6334"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structblock__t.html">block_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#abdfe2346b53850f10cb4cb70a79e6334">find_block</a> (char *addr, int <a class="el" href="notes_8txt.html#ae170b788b9ce36849b8a92724a029135">order</a>)</td></tr>
<tr class="memdesc:abdfe2346b53850f10cb4cb70a79e6334"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locate and return a pointer to the block with the given address within the free area of the given order. Return NULL if no such block exists.  <a href="#abdfe2346b53850f10cb4cb70a79e6334">More...</a><br /></td></tr>
<tr class="separator:abdfe2346b53850f10cb4cb70a79e6334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6674e7c974485f8a5dd8874e9eb125f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a6674e7c974485f8a5dd8874e9eb125f3">buddy_init</a> ()</td></tr>
<tr class="memdesc:a6674e7c974485f8a5dd8874e9eb125f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a list of all possible addresses for the given MAX_ORDER, and set up a list element for the first address.  <a href="#a6674e7c974485f8a5dd8874e9eb125f3">More...</a><br /></td></tr>
<tr class="separator:a6674e7c974485f8a5dd8874e9eb125f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8197baf99e89c859b5326a1d455680fd"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a8197baf99e89c859b5326a1d455680fd">buddy_alloc</a> (int size)</td></tr>
<tr class="separator:a8197baf99e89c859b5326a1d455680fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a961ef8a2fd9df43d50945100f172b97a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a961ef8a2fd9df43d50945100f172b97a">buddy_free</a> (void *addr)</td></tr>
<tr class="separator:a961ef8a2fd9df43d50945100f172b97a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6d390a89d1f6c149cef6284d2c0351df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="notes_8txt.html#aeb8c646dbe282a58600b038dd7f0fed2">struct</a> <a class="el" href="structlist__head.html">list_head</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a6d390a89d1f6c149cef6284d2c0351df">free_area</a> [<a class="el" href="buddy_8c.html#ab08dffec08ac450d78d4c062b571939e">MAX_ORDER</a>+1]</td></tr>
<tr class="separator:a6d390a89d1f6c149cef6284d2c0351df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6d688a63e574ba24b0247b2bec1e31d"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#ad6d688a63e574ba24b0247b2bec1e31d">g_memory</a> [1&lt;&lt; <a class="el" href="buddy_8c.html#ab08dffec08ac450d78d4c062b571939e">MAX_ORDER</a>]</td></tr>
<tr class="separator:ad6d688a63e574ba24b0247b2bec1e31d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c59228921651aa21b1411571fcf6147"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structblock__t.html">block_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buddy_8c.html#a0c59228921651aa21b1411571fcf6147">g_pages</a> [(1&lt;&lt; <a class="el" href="buddy_8c.html#ab08dffec08ac450d78d4c062b571939e">MAX_ORDER</a>)/<a class="el" href="buddy_8c.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a>]</td></tr>
<tr class="separator:a0c59228921651aa21b1411571fcf6147"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="aa44fbfb588ad3483e93dfc7fd28b2afd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADDR_TO_PAGE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">addr</td><td>)</td>
          <td>&#160;&#160;&#160;((unsigned long)((void *)addr - (void *)<a class="el" href="buddy_8c.html#ad6d688a63e574ba24b0247b2bec1e31d">g_memory</a>) / <a class="el" href="buddy_8c.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00034">34</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="aae7263f0e40a1e0dfefa6f53652a4a05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUDDY_ADDR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">addr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">o&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(<span class="keywordtype">void</span> *)((((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)addr - (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="buddy_8c.html#ad6d688a63e574ba24b0247b2bec1e31d">g_memory</a>) ^ (1&lt;&lt;o)) \</div><div class="line">                                     + (<span class="keywordtype">unsigned</span> long)g_memory)</div><div class="ttc" id="buddy_8c_html_ad6d688a63e574ba24b0247b2bec1e31d"><div class="ttname"><a href="buddy_8c.html#ad6d688a63e574ba24b0247b2bec1e31d">g_memory</a></div><div class="ttdeci">char g_memory[1&lt;&lt; MAX_ORDER]</div><div class="ttdef"><b>Definition:</b> <a href="buddy_8c_source.html#l00102">buddy.c:102</a></div></div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="buddy_8c_source.html#l00037">37</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="abcf0d5a50dd7e407cd464c1afbd27554"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IFDEBUG</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00047">47</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab08dffec08ac450d78d4c062b571939e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ORDER&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00026">26</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a23bae2b7cd4008c90256be146e21cccf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_ORDER&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00025">25</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7d467c1d283fdfa1f2081ba1e0d01b6e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_SIZE&#160;&#160;&#160;(1&lt;&lt;<a class="el" href="buddy_8c.html#a23bae2b7cd4008c90256be146e21cccf">MIN_ORDER</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00028">28</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7c13b46aacf7af9976a7f058076c81a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_TO_ADDR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">page_idx</td><td>)</td>
          <td>&#160;&#160;&#160;(void *)((page_idx*<a class="el" href="buddy_8c.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a>) + <a class="el" href="buddy_8c.html#ad6d688a63e574ba24b0247b2bec1e31d">g_memory</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00031">31</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9077500d1488a75e4eec5eeb1131655e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PDEBUG</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00046">46</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a260e435d62aa44fda8a1368df99c4a89"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USE_DEBUG&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Buddy Allocator </p>

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00009">9</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a8197baf99e89c859b5326a1d455680fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* buddy_alloc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate a memory block.</p>
<p>On a memory request, the allocator returns the head of a free-list of the matching size (i.e., smallest block that satisfies the request). If the free-list of the matching block size is empty, then a larger block size will be selected. The selected (large) block is then split into two smaller blocks. Among the two blocks, left block will be used for allocation or be further split while the right block will be added to the appropriate free-list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>size in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>memory block address </dd></dl>

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00218">218</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa16d99b90dd0a6b9d7e3db0573620c21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buddy_dump </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>print free pages in each order. </p>
<dl class="section note"><dt>Note</dt><dd>The output of this function is diff'd with the expected results file. Bad touch! </dd></dl>

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00520">520</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a77eea0047539c2e97bf94de50ccdf9f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buddy_dump_verbose </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print a more useful and thorough dump of the free area. </p>

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00545">545</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a961ef8a2fd9df43d50945100f172b97a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buddy_free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free an allocated memory block.</p>
<p>Whenever a block is freed, the allocator checks its buddy. If the buddy is free as well, then the two buddies are combined to form a bigger block. This process continues until one of the buddies is not free, or no buddies exist.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>memory block address to be freed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00395">395</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6674e7c974485f8a5dd8874e9eb125f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buddy_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a list of all possible addresses for the given MAX_ORDER, and set up a list element for the first address. </p>

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00157">157</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a163818df92461e2dc01f190f17493a1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void count_blocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="notes_8txt.html#aeb8c646dbe282a58600b038dd7f0fed2">struct</a> <a class="el" href="structlist__head.html">list_head</a> *&#160;</td>
          <td class="paramname"><em>theList</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Count and report the number of blocks in a given free_area member. </p>

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00637">637</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="abdfe2346b53850f10cb4cb70a79e6334"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structblock__t.html">block_t</a> * find_block </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>order</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Locate and return a pointer to the block with the given address within the free area of the given order. Return NULL if no such block exists. </p>

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00680">680</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2f7a9bf73e255fb58bf8e57855e67532"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structblock__t.html">block_t</a> * find_free_block </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>order</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Locate and return a pointer to a free block in the given order among the free_area, or NULL if no such block exists. </p>

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00660">660</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a291be3a0fdc0a7ec9c808e87c62c2385"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void merge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structblock__t.html">block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structblock__t.html">block_t</a> *&#160;</td>
          <td class="paramname"><em>buddy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00573">573</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3a4add9f9079c0eabd81e1da0c12ae6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structblock__t.html">block_t</a> *&#160;</td>
          <td class="paramname"><em>pg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print information for a given block. </p>

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00651">651</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8bec8ecb275b3b38660e8f1ff1bb6fce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_free_area </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print free areas in a tabular format, similar to the buddy allocator slides and examples. </p>

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00609">609</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a6d390a89d1f6c149cef6284d2c0351df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="notes_8txt.html#aeb8c646dbe282a58600b038dd7f0fed2">struct</a> <a class="el" href="structlist__head.html">list_head</a> free_area[<a class="el" href="buddy_8c.html#ab08dffec08ac450d78d4c062b571939e">MAX_ORDER</a>+1]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00096">96</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad6d688a63e574ba24b0247b2bec1e31d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char g_memory[1&lt;&lt; <a class="el" href="buddy_8c.html#ab08dffec08ac450d78d4c062b571939e">MAX_ORDER</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00102">102</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0c59228921651aa21b1411571fcf6147"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structblock__t.html">block_t</a> g_pages[(1&lt;&lt; <a class="el" href="buddy_8c.html#ab08dffec08ac450d78d4c062b571939e">MAX_ORDER</a>)/<a class="el" href="buddy_8c.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="buddy_8c_source.html#l00105">105</a> of file <a class="el" href="buddy_8c_source.html">buddy.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
